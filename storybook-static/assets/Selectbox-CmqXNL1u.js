import{r,j as i}from"./datepicker-Dz1Ef8Gs.js";const T=({options:s,value:g,placeholder:S,onChange:j,disabled:d=!1,className:y="",custom:I=!0,label:v})=>{const[t,f]=r.useState(!1),[o,k]=r.useState(g),[l,u]=r.useState(-1),w=r.useRef(null),p=r.useRef(null),E=r.useRef(null);r.useEffect(()=>{k(g)},[g]),r.useEffect(()=>{if(!t)return;const e=E.current,n=a=>{e?.contains(a.target)||f(!1)},c=a=>{e?.contains(a.relatedTarget)||f(!1)};return document.addEventListener("mousedown",n),e?.addEventListener("focusout",c),()=>{document.removeEventListener("mousedown",n),e?.removeEventListener("focusout",c)}},[t]),r.useEffect(()=>{t&&p.current&&l>=0&&p.current.querySelectorAll('li[role="option"]')[l]?.focus()},[t,l]);const x=e=>{k(e),j?.(e),f(!1),w.current?.focus()},h=()=>{if(d)return;f(!0);const e=s.findIndex(n=>n.value===o);u(e>=0?e:0)},m=()=>f(!1),N=e=>{if(!d)switch(e.key){case"Enter":case" ":e.preventDefault(),t?l>=0&&x(s[l].value):h();break;case"ArrowDown":e.preventDefault(),t?u(n=>Math.min(n+1,s.length-1)):h();break;case"ArrowUp":e.preventDefault(),t?u(n=>Math.max(n-1,0)):h();break;case"Escape":m();break;case"Tab":m();break}},q=(e,n,c)=>{switch(e.key){case"Enter":case" ":e.preventDefault(),x(c.value);break;case"ArrowDown":{e.preventDefault();const a=Math.min(n+1,s.length-1);u(a);const b=p.current;b&&b.querySelectorAll('li[role="option"]')[a]?.focus();break}case"ArrowUp":{e.preventDefault();const a=Math.max(n-1,0);u(a);const b=p.current;b&&b.querySelectorAll('li[role="option"]')[a]?.focus();break}case"Escape":m(),w.current?.focus();break;case"Tab":m();break}};return I?i.jsxs("div",{ref:E,className:`selectbox-wrapper${d?" disabled":""}${y?` ${y}`:""}`,tabIndex:-1,children:[i.jsx("button",{type:"button",ref:w,className:`selectbox-button ${o?"":"placeholder"} ${t?"open":""}`,disabled:d,"aria-haspopup":"listbox","aria-expanded":t,"aria-controls":t?"selectbox-listbox":void 0,"aria-label":v?`${v} 선택`:"선택",onKeyDown:N,onClick:()=>t?m():h(),tabIndex:0,children:o?s.find(e=>e.value===o)?.label:S}),t&&i.jsx("ul",{ref:p,id:"selectbox-listbox",role:"listbox",className:"selectbox-options",tabIndex:-1,"aria-activedescendant":l>=0?`option-${s[l]?.value}`:void 0,children:s.map((e,n)=>i.jsx("li",{id:`option-${e.value}`,tabIndex:-1,role:"option","aria-selected":o===e.value,className:["selectbox-option",o===e.value?"selected":"",l===n?"highlight":""].filter(Boolean).join(" "),onKeyDown:c=>q(c,n,e),onClick:()=>x(e.value),onMouseEnter:()=>u(n),children:e.label},e.value))})]}):i.jsx("div",{className:"selectbox-native-wrapper",children:i.jsxs("select",{className:`selectbox-native ${y} ${o?"":"placeholder"}`,value:o??"",onChange:e=>x(e.target.value),disabled:d,"aria-label":v?`${v} 선택`:"선택",children:[i.jsx("option",{value:"",disabled:!0,children:S}),s.map(e=>i.jsx("option",{value:e.value,children:e.label},e.value))]})})};T.__docgenInfo={description:"SelectBox UI 컴포넌트",methods:[],displayName:"SelectBox",props:{options:{required:!0,tsType:{name:"Array",elements:[{name:"SelectOption"}],raw:"SelectOption[]"},description:`\`\`\`jsx\r
options = [\r
  {\r
    label: '첫 번째 항목',\r
    value: 1\r
  },\r
  {\r
    label: '두 번째 항목',\r
    value: '2'\r
  }\r
]\r
\`\`\``},value:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"placeholder 값"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string | number) => void",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"value"}],return:{name:"void"}}},description:"변경시 호출할 함수"},disabled:{required:!1,tsType:{name:"boolean"},description:"비활성화 여부",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"커스텀 CSS 클래스",defaultValue:{value:"''",computed:!1}},custom:{required:!1,tsType:{name:"boolean"},description:"custom 셀렉트박스 사용여부",defaultValue:{value:"true",computed:!1}},label:{required:!1,tsType:{name:"string"},description:"접근성 및 시각적 label"}}};export{T as S};
